<% scale ||= 1.0 -%>
<div id="map_container">
	<% for location in locations do -%>
		<% next if location.ministries.empty?
		  ministry = location.ministries.first
		  id = "loc_" + location.id.to_s
		  y = (location.y.to_f * scale).to_i - 8
		  x = (location.x.to_f * scale).to_i - 8 -%>
		<%= link_to image_tag('star.gif',
			:style => "position: absolute; top: #{y}px; left: #{x}px;",
			:onmouseover => "Effect.Appear('#{id}')",
			:onmouseout => "Effect.Fade('#{id}')"),
			ministry_url(ministry) %>
		<div id="<%= id %>" class="tip"
		  style="position: absolute; display: none;
		    top: <%= y - 20 %>px; left: <%= x + 15 %>px;">
		  <%=h ministry.name %>
		</div>
	<% end -%>
	<%= image_tag('world_map.jpg', :id => 'map',
		:width => "#{(800.0 * scale).to_i}") %>
	<% if 1.0 == scale -%>
	<div id="map_help">
	  Hover or click on the stars
	</div>
	<% end -%>
</div>
